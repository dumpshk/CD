#include <stdio.h> 
#include <string.h> 
#include <ctype.h> 
#include <stdlib.h> 
 
#define MAX_WORDS 1000 

 
#define MAX_LEN 100 
 
char keywords[][20] = { 
    "auto", "break", "case", "char", "const", "continue", "default", "do", 
"double", "else", 
    "enum", "extern", "float", "for", "goto", "if", "int", "long", 
"register", "return", 
    "short", "signed", "sizeof", "static", "struct", "switch", "typedef", 
"union", "unsigned", 
    "void", "volatile", "while", "inline", "restrict", "_Bool", 
"_Complex", "_Imaginary", "include", "printf", "scanf", "main"}; 
int keyword_count = 41; 
 
char operators[][5] = { 
    "+", "-", "*", "/", "%", "=", "==", "!=", "<", ">", "<=", ">=", "&&", 
"||", "!", "&", "|", "^", "~", "<<", ">>", "++", "--"}; 
int operator_count = 23; 
 
char punctuations[] = {';', ',', '(', ')', '{', '}', '[', ']'}; 
int punctuation_count = 8; 
 
char stored_keywords[MAX_WORDS][MAX_LEN]; 
char stored_identifiers[MAX_WORDS][MAX_LEN]; 
char stored_operators[MAX_WORDS][MAX_LEN]; 
char stored_punctuations[MAX_WORDS][MAX_LEN]; 
char stored_literals[MAX_WORDS][MAX_LEN]; 
 
int k = 0, id = 0, op = 0, punc = 0, lit = 0; 
 
int isKeyword(char *word) 
{ 
    for (int i = 0; i < keyword_count; i++) 
    { 
        if (strcmp(word, keywords[i]) == 0) 
            return 1; 
    } 
    return 0; 
} 
 
int isOperator(char *word) 

{ 
    for (int i = 0; i < operator_count; i++) 
    { 
        if (strcmp(word, operators[i]) == 0) 
            return 1; 
    } 
    return 0; 
} 
 
int isPunctuation(char ch) 
{ 
    for (int i = 0; i < punctuation_count; i++) 
    { 
        if (ch == punctuations[i]) 
            return 1; 
    } 
    return 0; 
} 
 
int isIdentifier(char *word) 
{ 
    if (!isalpha(word[0]) && word[0] != '_') 
        return 0; 
    for (int i = 1; word[i]; i++) 
    { 
        if (!isalnum(word[i]) && word[i] != '_') 
            return 0; 
    } 
    return !isKeyword(word); 
} 
 
int isLiteral(char *word) 
{ 
    int dot = 0; 
    if (isdigit(word[0]) || (word[0] == '.' && isdigit(word[1]))) 
    { 
        for (int i = 0; word[i]; i++) 
        { 
            if (word[i] == '.') 
                dot++; 

 
            else if (!isdigit(word[i])) 
                return 0; 
        } 
        return dot <= 1; 
    } 
    if (word[0] == '"' && word[strlen(word) - 1] == '"') 
        return 1; 
    return 0; 
} 
 
void classify(char *word) 
{ 
    int exists = 0; 
 
    if (isKeyword(word)) 
    { 
        exists = 0; 
        for (int j = 0; j < k; j++) 
        { 
            if (strcmp(stored_keywords[j], word) == 0) 
            { 
                exists = 1; 
                break; 
            } 
        } 
        if (!exists) 
            strcpy(stored_keywords[k++], word); 
    } 
 
    else if (isOperator(word)) 
    { 
        exists = 0; 
        for (int j = 0; j < op; j++) 
        { 
            if (strcmp(stored_operators[j], word) == 0) 
            { 
                exists = 1; 
                break; 
            } 
        } 
 
 
        if (!exists) 
            strcpy(stored_operators[op++], word); 
    } 
 
    else if (strlen(word) == 1 && isPunctuation(word[0])) 
    { 
        exists = 0; 
        for (int j = 0; j < punc; j++) 
        { 
            if (stored_punctuations[j][0] == word[0] && 
stored_punctuations[j][1] == '\0') 
            { 
                exists = 1; 
                break; 
            } 
        } 
        if (!exists) 
        { 
            stored_punctuations[punc][0] = word[0]; 
            stored_punctuations[punc++][1] = '\0'; 
        } 
    } 
 
    else if (isLiteral(word)) 
    { 
        exists = 0; 
        for (int j = 0; j < lit; j++) 
        { 
            if (strcmp(stored_literals[j], word) == 0) 
            { 
                exists = 1; 
                break; 
            } 
        } 
        if (!exists) 
            strcpy(stored_literals[lit++], word); 
    } 
 
    else if (isIdentifier(word)) 
    { 

        exists = 0; 
        for (int j = 0; j < id; j++) 
        { 
            if (strcmp(stored_identifiers[j], word) == 0) 
            { 
                exists = 1; 
                break; 
            } 
        } 
        if (!exists) 
            strcpy(stored_identifiers[id++], word); 
    } 
} 
 
int main() 
{ 
    FILE *fp = fopen("input.c", "r"); 
    if (!fp) 
        return 1; 
 
    char ch, word[MAX_LEN]; 
    int i = 0; 
 
    while ((ch = fgetc(fp)) != EOF) 
    { 
        if (isalnum(ch) || ch == '_' || ch == '.' || ch == '"') 
        { 
            word[i++] = ch; 
        } 
        else 
        { 
            if (i > 0) 
            { 
                word[i] = '\0'; 
                classify(word); 
                i = 0; 
            } 
 
            if (ch == '=' || ch == '!' || ch == '<' || ch == '>' || ch == 
'+' || ch == '-' || ch == '&' || ch == '|') 

 
            { 
                char temp[3] = {ch, fgetc(fp), '\0'}; 
                if (isOperator(temp)) 
                    classify(temp); 
                else 
                { 
                    ungetc(temp[1], fp); 
                    temp[1] = '\0'; 
                    classify(temp); 
                } 
            } 
            else if (!isspace(ch)) 
            { 
                char temp[2] = {ch, '\0'}; 
                classify(temp); 
            } 
        } 
    } 
 
    fclose(fp); 
 
    printf("\nKeywords (%d):\n", k); 
    for (int i = 0; i < k; i++) 
        printf("%s\n", stored_keywords[i]); 
 
    printf("\nIdentifiers (%d):\n", id); 
    for (int i = 0; i < id; i++) 
        printf("%s\n", stored_identifiers[i]); 
 
    printf("\nOperators (%d):\n", op); 
    for (int i = 0; i < op; i++) 
        printf("%s\n", stored_operators[i]); 
 
    printf("\nPunctuations (%d):\n", punc); 
    for (int i = 0; i < punc; i++) 
        printf("%s\n", stored_punctuations[i]); 
 
    printf("\nLiterals (%d):\n", lit); 
    for (int i = 0; i < lit; i++) 
        printf("%s\n", stored_literals[i]); 

 
 
    return 0; 
} 
