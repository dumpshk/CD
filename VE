 #include <stdio.h>
 #include <string.h>
 #include <ctype.h>
 #define LIMIT 200
 int checkBrackets(char *exp) {
 char stack[LIMIT];
 int top =-1;
 for (int i = 0; exp[i] != '\0'; i++) {
 if (exp[i] == '(') stack[++top] = '(';
 else if (exp[i] == ')') {
 if (top ==-1) return 0;
 top--;
 }
 }
 return (top ==-1);
 }
 int validate(char *exp) {
 int n = strlen(exp);
 if (n == 0) return 0;
 if (!checkBrackets(exp)) return 0;
 int expectOperand = 1;
 for (int i = 0; i < n; i++) {
 char c = exp[i];
 if (isspace(c)) continue;
 if (isdigit(c)) {
 expectOperand = 0;
 while (isdigit(exp[i+1])) i++;
 }
 else if (isalpha(c)) {
 expectOperand = 0;
 while (isalnum(exp[i+1])) i++;
 if (exp[i+1] == '+' && exp[i+2] == '+') { i += 2; expectOperand = 0; }
 else if (exp[i+1] == '-' && exp[i+2] == '-') { i += 2; expectOperand
 = 0; }
 }

 else if (c == '+' || c == '-' || c == '*' || c == '/') {
 if (exp[i+1] == c && (c == '+' || c == '-')) {
 i++;
 if (expectOperand) expectOperand = 1;
 else expectOperand = 0;
 }
 else if (exp[i+1] == '=') {
 i++;
 if (expectOperand) return 0;
 expectOperand = 1;
 }
 else {
 if (expectOperand) return 0;
 expectOperand = 1;
 }
 }
 else if (c == '(') {
 if (!expectOperand) return 0;
 expectOperand = 1;
 }
 else if (c == ')') {
 if (expectOperand) return 0;
 expectOperand = 0;
 }
 else return 0;
 }
 return (!expectOperand);
 }
 int main() {
 char exp[LIMIT];
 printf("Enter an expression: ");
 fgets(exp, LIMIT, stdin);
 exp[strcspn(exp, "\n")] = '\0';
 if (validate(exp)) printf("Valid Expression\n");
 else printf("Invalid Expression\n");
 return 0;
}
